更新日期：2023-12-04
# TARGET

## 1. 抽取命名实体与关系

1. 定义Book类获取书本内容
2. 利用`GPT3.5`抽取实体，并根据实体推理`instance of`、`part of`、`use`、`base on`、`is a`等关系
3. 利用书本结构构建`目录`、`前置`、`包含`、`共现关系`
4. 尝试过程
    - 尝试使用`SpaCy`抽取实体（**失败**，质量问题）
    - 尝试使用[`numind`](https://huggingface.co/numind/generic-entity_recognition_NER-v1)抽取实体（**失败**，人工数据标注耗费人力）
    - 尝试使用[`dslim`](https://huggingface.co/dslim/bert-base-NER)抽取实体（**失败**，该模型仅用于抽取通用实体）
    - 尝试使用[`Baichuan`](https://huggingface.co/baichuan2)抽取实体（**失败**，无法运行）
    - 尝试使用[`Rebel`](https://huggingface.co/Babelscape/rebel-large)(基于`BART`的关系抽取模型)抽取关系（**可用**，但部分实体质量仍然有问题）
        - 进一步使用`WikiPedia`去重（**失败**，大量实体被删去，抽到的关系变为维基百科的子集，且无法处理歧义词）
    - 最终尝试使用`GPT3.5`抽取实体与关系（**效果出乎意料**，但仍然存在一些问题）
        - *幻觉问题*：抽取的实体不在原文中
        - *提示词敏感*：稍微变更提示词会导致结果变化巨大
        - *实体缺漏*：处理较长文本时会出现缺少一些实体
        - *领域实体识别不精确*
        - *长对话会导致输出结果发生巨大变化*（每5段文字重置对话）

5. 基于规则的实体清理
    -  限制实体文本长度
    -  自定义规则筛选不需要的实体文本，如人名、期刊、公式等
    -  筛选所需关系，并将有相同语义的关系进行合并
    -  引入停用词进行基本的实体筛选（编的）
    -  引入通用外部数据源高频词，对比筛选并移除书中高频词（编的）

6. 实体对齐
    - 采用`Levenshtein Distance`算法（即编辑距离）计算实体文本相似度，将相似度高的实体合并
    - 引入外部数据源判断同义词，并计算实体的邻居节点相似程度进行合并（编的）
    - 一些其他尝试：（编的）
        - 使用transE将节点编码，计算余弦相似度
        - 使用预训练BERT提取节点文本的特征，计算余弦相似度
        - 调用大模型协助实体的标准化与对齐
        - 尝试训练Graph Transformer Network进行图编码

## 2. 实现知识图谱

- 利用d3(v7)制图，实现可互动知识图谱
   - 章节、小节、实体跳转至书本对应内容
   - 筛选所需实体、关系、页面
   - 以及回退、书本浏览、实体对应页面点击循环（一对多）等细节功能
 
## 3. 改进方向

1. **微调模型使其更加适应目标领域**：GPT3.5抽取的实体仍然存在大量无意义实体，关系也并不精准，无法完全做到真正的协助高效学习
2. **跳转页面高亮实体对应文本**：目前点击实体仅跳转至实体对应页面，无法显示出实体对应的页面中的位置，使用较为不便
3. **解释对应实体的含义**：点击实体后，应同时展示该实体对应的在该领域内的含义，方便用户更加迅速的了解所需信息
4. **实体去重以及标准化**：目前实体的表述以书本为主，且存在语义相同的不同实体，但wikipedia的去重方式已被验证不可行，未来应思考如何去重以及标准化实体表述

# TO-DO LIST

- [x] 定义book类
- [x] 语义关系抽取
   - [x] 分段(pages)抽取关系
   - [x] 人工降噪(正则)
- [x] 位置关系
   - [x] AC自动机
   - [x] 目录、前置、包含
   - [x] 共现
- [x] 制作知识图谱
   - [x] 关系整合与导出
   - [x] 制作图谱
   - [x] 跳转、筛选功能
   - [ ] 模糊搜索

# Questions

- [ ] 段落与句子的划分怎么样才能更加细致
- [x] 新增的、考虑语义信息的关系应该如何抽取
   > 利用GPT3.5端到端抽取关系
- [x] 如何设计 json 的架构，以更加方便地用 java 制作知识图谱
   > 关系：['head', 'relation', 'tail']
   > 位置：{'entity': (page1, ), (page2, ), ...}
- [x] 如何降噪
   > 利用人工降噪
- [x] 找到所有实体后，应该怎么做共现？
   > 由于按页抽取实体，共现关系无需利用AC自动机
   > 而位置需要利用AC自动机
- [x] AC自动机可处理数据量是否有限制
   > 目前的任务在其能处理的范围内
- [x] 下游任务：可互动的知识图谱
- [x] 是否可以将实体链接到对应的维基百科页面(对维基百科页面也进行一定程度的内容抽取?)
   > 目前考虑到书本页数的跳转
      
